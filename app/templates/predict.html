{% extends "base.html" %}

{% block title %}Predict | SLR{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/predict.css') }}">
{% endblock %}

{% block content %}
<div class="predict-container">
  <!-- Hero Section -->
  <section class="predict-hero">
    <div class="hero-content">
      <h1 class="hero-title">
        <i class="fas fa-video"></i>
        Live Sign Language Detection
      </h1>
      <p class="hero-subtitle">
        Real-time AI-powered sign language letter recognition using your camera
      </p>
    </div>
  </section>

  <!-- Main Prediction Area -->
  <section class="prediction-section">
    <div class="video-container">
      <div class="video-wrapper">
        <video id="video" width="640" height="480" autoplay muted></video>
        <div class="video-overlay" id="videoOverlay">
          <div class="overlay-content">
            <i class="fas fa-camera camera-icon"></i>
            <h3>Camera Ready</h3>
            <p>Click "Start Detection" to begin</p>
          </div>
        </div>
        <div class="video-status" id="videoStatus">
          <i class="fas fa-circle status-indicator"></i>
          <span class="status-text">Camera Off</span>
        </div>
      </div>

      <!-- Control Panel -->
      <div class="control-panel">
        <button id="toggleCam" class="control-btn primary">
          <i class="fas fa-play"></i>
          <span class="btn-text">Start Detection</span>
        </button>
      </div>
    </div>

    <!-- Results Panel -->
    <div class="results-panel">
      <div class="result-card">
        <div class="result-header">
          <i class="fas fa-brain"></i>
          <h3>AI Prediction</h3>
        </div>
        <div class="result-content">
          <div id="result" class="prediction-result">
            <span class="prediction-label">Detected Letter:</span>
            <span class="prediction-value">-</span>
          </div>
          <div class="confidence-bar">
            <div class="confidence-label">Confidence:</div>
            <div class="confidence-meter">
              <div class="confidence-fill" id="confidenceFill"></div>
              <span class="confidence-text" id="confidenceText">0%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="stats-card">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-tachometer-alt"></i>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="fps">--</div>
              <div class="stat-label">FPS</div>
            </div>
          </div>
          <!-- <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="latency">--ms</div>
              <div class="stat-label">Latency</div>
            </div>
          </div> -->
        </div>
      </div>
    </div>
  </section>

  <!-- Instructions Section -->
  <section class="instructions-section">
    <div class="instructions-card">
      <h3>
        <i class="fas fa-info-circle"></i>
        How to Use
      </h3>
      <div class="instructions-grid">
        <div class="instruction-item">
          <div class="instruction-number">1</div>
          <div class="instruction-content">
            <h4>Position Yourself</h4>
            <p>Sit in front of your camera with good lighting</p>
          </div>
        </div>
        <div class="instruction-item">
          <div class="instruction-number">2</div>
          <div class="instruction-content">
            <h4>Start Detection</h4>
            <p>Click "Start Detection" to activate the camera</p>
          </div>
        </div>
        <div class="instruction-item">
          <div class="instruction-number">3</div>
          <div class="instruction-content">
            <h4>Make Signs</h4>
            <p>Form sign language letters with your hand</p>
          </div>
        </div>
        <div class="instruction-item">
          <div class="instruction-number">4</div>
          <div class="instruction-content">
            <h4>View Results</h4>
            <p>See real-time predictions and confidence scores</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tips Section -->
  <section class="tips-section">
    <div class="tips-card">
      <h3>
        <i class="fas fa-lightbulb"></i>
        Tips for Better Detection
      </h3>
      <div class="tips-list">
        <div class="tip-item">
          <i class="fas fa-check-circle"></i>
          <span>Ensure good lighting on your hands</span>
        </div>
        <div class="tip-item">
          <i class="fas fa-check-circle"></i>
          <span>Keep your hand steady for 1-2 seconds</span>
        </div>
        <div class="tip-item">
          <i class="fas fa-check-circle"></i>
          <span>Use a plain background behind your hand</span>
        </div>
        <div class="tip-item">
          <i class="fas fa-check-circle"></i>
          <span>Position your hand clearly in the camera view</span>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.4/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.4/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/hands.js"></script>
<script defer src="{{ url_for('static', filename='js/predict.js') }}"></script>
{% endblock %}
